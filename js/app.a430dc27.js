(function(e){function t(t){for(var o,s,r=t[0],a=t[1],u=t[2],d=0,b=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,r=1;r<n.length;r++){var a=n[r];0!==i[a]&&(o=!1)}o&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},c=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/permission-master/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=a;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"027a":function(e,t,n){},"0760":function(e,t,n){e.exports=n.p+"img/checked.5695ee6f.svg"},"13fe":function(e,t,n){},"1b41":function(e,t,n){"use strict";n("dc61")},"1f85":function(e,t,n){},"209b":function(e,t,n){"use strict";n("b6c0")},"26f1":function(e,t,n){},"2b0a":function(e,t,n){},"391e":function(e,t,n){"use strict";n("bbc0")},"461e":function(e,t,n){},"4ec3":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i={class:"root"},c={class:"root-main"},s={class:"scroll-container"};function r(e,t,n,r,a,u){var l=Object(o["B"])("router-view"),d=Object(o["B"])("Modals");return Object(o["u"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",i,[Object(o["g"])("main",c,[Object(o["g"])("div",s,[Object(o["i"])(l)])])]),Object(o["i"])(d)],64)}var a={class:"modals-container"},u=["onClick"],l=["onClick"];function d(e,t,n,i,c,s){return Object(o["u"])(),Object(o["f"])("div",a,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(e.modals,(function(e,t){return Object(o["u"])(),Object(o["f"])("div",{key:t,class:"modal-wrap"},[Object(o["g"])("div",{class:"modal-overlay",ref:s.setItemRef,onClick:function(e){return s.closeWrap(e,t)}},null,8,u),Object(o["g"])("div",{class:"modal-container",style:Object(o["q"])(s.setWidth(e.width))},[Object(o["g"])("div",{class:"modal-close",onClick:function(e){return s.close(t)}},null,8,l),(Object(o["u"])(),Object(o["d"])(Object(o["C"])(e.component),Object(o["n"])({ref:"customComponent",modalKey:t},e.componentProps,{onClose:s.close}),null,16,["modalKey","onClose"]))],4)])})),128))])}var b=n("5530"),f=(n("caad"),n("5502")),m={name:"Modals",components:{},data:function(){return{itemRefs:[]}},methods:{close:function(e){this.$refs.customComponent[e]&&this.$refs.customComponent[e].$destroy(),this.$store.dispatch("modalClose",e)},closeWrap:function(e,t){e.target===this.itemRefs[t]&&this.close(t)},keyUpHandler:function(e){["Escape","Esc"].includes(e.key)&&this.modals.length&&this.close(this.modals.length-1)},setItemRef:function(e){e&&this.itemRefs.push(e)},setWidth:function(e){return!(!e||"number"!==typeof e)&&"max-width: ".concat(e,"px")}},watch:{modals:{deep:!0,handler:function(){var e=document.querySelector("html");this.modals.length?e.classList.add("modals-open"):e.classList.remove("modals-open")}}},computed:Object(b["a"])({},Object(f["b"])(["modals"])),beforeUpdate:function(){this.itemRefs=[]},mounted:function(){document.addEventListener("keyup",this.keyUpHandler)},unmounted:function(){document.removeEventListener("keyup",this.keyUpHandler)}},p=(n("209b"),n("6b0d")),O=n.n(p);const h=O()(m,[["render",d]]);var j=h,v={name:"App",components:{Modals:j}};n("e576"),n("688c"),n("74b1"),n("b96e");const g=O()(v,[["render",r]]);var k=g,y=n("6c02"),P={class:"app-wrapper",style:{}},C={class:"content"},T={class:"app-container"},_={class:"table"},S={class:"table__header"};function w(e,t,n,i,c,s){var r=Object(o["B"])("side-menu"),a=Object(o["B"])("Header"),u=Object(o["B"])("BackButton"),l=Object(o["B"])("Input"),d=Object(o["B"])("permission");return Object(o["u"])(),Object(o["f"])("div",P,[Object(o["i"])(r),Object(o["g"])("div",C,[Object(o["i"])(a),Object(o["g"])("div",T,[Object(o["i"])(u),Object(o["i"])(l),Object(o["g"])("div",_,[Object(o["g"])("div",S,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(c.headers,(function(e){return Object(o["u"])(),Object(o["f"])("div",{class:"table__item",key:e},Object(o["E"])(e),1)})),128))]),c.permission?(Object(o["u"])(),Object(o["d"])(d,{key:0,onChange:e.handlePermissionChange,permission:c.permission.data.rootPermissionTitles,rootPermission:c.permission.data.rootPermission},null,8,["onChange","permission","rootPermission"])):Object(o["e"])("",!0)]),Object(o["g"])("button",{class:"button button-black",onClick:t[0]||(t[0]=function(){return s.createPermission&&s.createPermission.apply(s,arguments)})},"Сохранить")])])])}var E=n("d4ec"),A=n("bee2"),x=(n("d3b7"),n("e9c4"),n("ac1f"),n("5319"),n("5b81"),n("53ca"));n("159b"),n("b64b"),n("99af"),n("fb6a");function I(e){return JSON.parse(JSON.stringify(e))}var B={part1:{title:"Раздел 1",items:{part11:{title:"Раздел 1.1",items:{part111:{title:"Раздел 1.1.1",items:{part1111:{title:"Раздел 1.1.1.1",items:{part11111:{title:"Раздел 1.1.1.1.1"}}}}},part112:{title:"Раздел 1.1.2"}}}}},part2:{title:"Раздел 2",items:{part21:{title:"Раздел 2.1"}}}},L={part1:{part11:{part111:{part1111:{part11111:{action:{action1:0,action2:0,action3:0,action4:0}}}},part112:{action:{action1:0,action2:0}}}},part2:{part21:{action:{action1:0,action2:0,action3:0}}}},M={data:{rootPermissionTitles:B,rootPermission:L}},N=function(){function e(){Object(E["a"])(this,e)}return Object(A["a"])(e,null,[{key:"getTemplates",value:function(){return Promise.resolve(M)}},{key:"createPermission",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(Object(o["F"])(e));var t=I(L),n=JSON.stringify(t);return n=n.replaceAll('"action2":0','"action2":1'),console.log(JSON.stringify(e)===n),JSON.stringify(e)===n}}]),e}(),R=n("8055"),K=n.n(R),H={class:"grid-container"},$={class:"column"},J=["onClick"],U=Object(o["g"])("img",{class:"arrow",src:K.a,alt:"Arrow"},null,-1),D={class:"childrens"},W={key:0},G={key:1},q={class:"grid-item"};function V(e,t,n,i,c,s){var r=Object(o["B"])("checkbox"),a=Object(o["B"])("permission",!0);return Object(o["u"])(),Object(o["f"])("div",H,[Object(o["g"])("div",$,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(e.permission,(function(t,n){return Object(o["u"])(),Object(o["f"])("div",{key:n,class:"grid-item"},[t.title?(Object(o["u"])(),Object(o["f"])("button",{key:0,class:Object(o["p"])([{selected:t.showChildren},"permission__button button"]),onClick:function(n){return e.toggleChildren(t)}},[Object(o["i"])(r,{rootPermission:e.rootPermission[n],permission:e.permission,"action-key":n,"parent-key":n,onChange:function(t){return e.handleCheckboxChange(e.permission[n],e.actionKey,n)}},null,8,["rootPermission","permission","action-key","parent-key","onChange"]),Object(o["g"])("p",null,Object(o["E"])(t.title),1),U],10,J)):Object(o["e"])("",!0)])})),128))]),Object(o["g"])("div",D,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(e.permission,(function(t,n){return Object(o["u"])(),Object(o["f"])("div",{key:n,class:"grid-children"},[t.showChildren?(Object(o["u"])(),Object(o["f"])("div",W,[t.items?(Object(o["u"])(),Object(o["d"])(a,{key:0,permission:t.items,level:e.level+1,"root-permission":e.rootPermission[n]},null,8,["permission","level","root-permission"])):Object(o["e"])("",!0),t.action?(Object(o["u"])(),Object(o["f"])("div",G,[Object(o["g"])("div",q,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(t.action,(function(t,i){return Object(o["u"])(),Object(o["f"])("button",{key:i,class:"permission__button button"},[Object(o["i"])(r,{rootPermission:e.rootPermission[n],permission:e.permission,"action-key":i,"parent-key":n,onChange:function(t){return e.handleCheckboxChange(e.permission[n],i,n)}},null,8,["rootPermission","permission","action-key","parent-key","onChange"]),Object(o["h"])(" "+Object(o["E"])(i),1)])})),128))])])):Object(o["e"])("",!0)])):Object(o["e"])("",!0)])})),128))])])}var F=n("2909"),z=(n("a9e3"),n("07ac"),n("2532"),n("80c1")),Q=n.n(z),X=n("0760"),Y=n.n(X),Z={class:"checkbox"},ee={key:0,src:Q.a,alt:"Unchecked"},te={key:1,src:Y.a,alt:"Checked"};function ne(e,t,n,i,c,s){return Object(o["u"])(),Object(o["f"])("label",Z,[Object(o["K"])(Object(o["g"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.checked=e})},null,512),[[o["H"],c.checked]]),c.checked?Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("img",ee)),c.checked?(Object(o["u"])(),Object(o["f"])("img",te)):Object(o["e"])("",!0)])}n("2ca0");var oe={name:"Checkbox",props:{value:Boolean,rootPermission:Object,permission:Object,actionKey:String,parentKey:String},data:function(){return{checked:!1}},computed:{rootPermissionTitles:function(){return this.$store.state.rootPermissionTitles}},mounted:function(){this.actionKey.startsWith("action")?1===this.permission[this.parentKey].action[this.actionKey]&&(this.checked=!0):this.updateCheckStatus(this.rootPermissionTitles,this.actionKey)},watch:{rootPermissionTitles:{deep:!0,handler:function(){this.updateCheckStatus(this.rootPermissionTitles,this.actionKey)}}},methods:{updateCheckStatus:function(e,t){for(var n in e)n===t?!0===e[n].checked&&(this.checked=!0):"object"===Object(x["a"])(e[n])&&this.updateCheckStatus(e[n],t)}}};n("c044");const ie=O()(oe,[["render",ne],["__scopeId","data-v-0d510168"]]);var ce=ie,se=Object(o["j"])({name:"Permission",components:{Checkbox:ce},data:function(){return{isChecked:!1,selectedActions:{},isMounted:!1}},props:{permission:Object,rootPermission:Object,level:{type:Number,default:1}},mounted:function(){},methods:{toggleChildren:function(e){Object.values(this.permission).forEach((function(t){t!==e&&Object.prototype.hasOwnProperty.call(t,"showChildren")&&(t.showChildren=!1)})),e.showChildren=!e.showChildren},handleCheckboxChange:function(e,t,n){var o=this;t?e.action[t]^=1:e.checked=!e.checked,this.$store.dispatch("findParents",{key:n}).then((function(e){var n,i=(n=[]).concat.apply(n,Object(F["a"])(e));o.updateCheckedStatus(o.$store.state.rootPermissionTitles,i,t)}))},updateCheckedStatus:function(e,t,n){for(var o in e)t.includes(o)&&(e[o].checked=!0),"object"===Object(x["a"])(e[o])&&this.updateCheckedStatus(e[o],t,n)},getLast:function(e){if("object"!==Object(x["a"])(e))return e;for(var t in e)return this.getLast(e[t])}}});n("bb61");const re=O()(se,[["render",V]]);var ae=re,ue={class:"side-menu"};function le(e,t,n,i,c,s){return Object(o["u"])(),Object(o["f"])("div",ue)}var de={name:"SideMenu"};n("1b41");const be=O()(de,[["render",le],["__scopeId","data-v-2b8989d5"]]);var fe=be,me={class:"header"};function pe(e,t,n,i,c,s){return Object(o["u"])(),Object(o["f"])("div",me)}var Oe={name:"Header"};n("f73b");const he=O()(Oe,[["render",pe],["__scopeId","data-v-49a7fc77"]]);var je=he,ve=n("8568"),ge=n.n(ve),ke=function(e){return Object(o["x"])("data-v-c4a7fdfa"),e=e(),Object(o["v"])(),e},ye={class:"button back-button"},Pe=ke((function(){return Object(o["g"])("img",{class:"arrow",src:ge.a,alt:"Arrow left"},null,-1)})),Ce=ke((function(){return Object(o["g"])("p",null,"Назад",-1)})),Te=[Pe,Ce];function _e(e,t,n,i,c,s){return Object(o["u"])(),Object(o["f"])("button",ye,Te)}var Se={name:"BackButton"};n("984b");const we=O()(Se,[["render",_e],["__scopeId","data-v-c4a7fdfa"]]);var Ee=we;function Ae(e,t,n,i,c,s){return Object(o["K"])((Object(o["u"])(),Object(o["f"])("input",{class:"input","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.value=e})},null,512)),[[o["I"],c.value]])}var xe={name:"Input",data:function(){return{value:"Менеджер"}}};n("72b7");const Ie=O()(xe,[["render",Ae],["__scopeId","data-v-6a3b029f"]]);var Be=Ie,Le={name:"Home",components:{Permission:ae,SideMenu:fe,Header:je,BackButton:Ee,Input:Be},data:function(){return{permission:null,headers:["Название","Проекты","Действия"]}},methods:{getTemplates:function(){var e=this;N.getTemplates().then((function(t){var n,o,i;e.permission=t,e.addActions(null===(n=e.permission)||void 0===n?void 0:n.data.rootPermissionTitles,null===(o=e.permission)||void 0===o?void 0:o.data.rootPermission),e.$store.dispatch("setRootPermissionTitles",null===(i=e.permission)||void 0===i?void 0:i.data.rootPermissionTitles)}))},addActions:function(e,t){for(var n in e)e[n].checked=0,"items"===n?this.addActions(e[n],t):n in t&&("action"in t[n]&&(e[n].action=t[n].action),"items"in e[n]&&this.addActions(e[n].items,t[n]))},createPermission:function(){N.createPermission(this.permission.data.rootPermission)}},mounted:function(){this.getTemplates()}};n("391e");const Me=O()(Le,[["render",w],["__scopeId","data-v-3eda1827"]]);var Ne=Me,Re=[{path:"/",name:"Home",component:Ne}],Ke=Object(y["a"])({history:Object(y["b"])("/permission-master/"),routes:Re}),He=Ke,$e=(n("a434"),Object(f["a"])({state:{modals:[],showNested:{},rootPermission:{},rootPermissionTitles:{},parents:[]},getters:{modals:function(e){return e.modals},showNested:function(e){return e.showNested},rootPermission:function(e){return e.rootPermission},rootPermissionTitles:function(e){return e.rootPermissionTitles},parents:function(e){return e.parents}},mutations:{SET_MODAL:function(e,t){e.modals.push(t)},DELETE_MODAL:function(e,t){e.modals.splice(t,1)},SET_ROOT_PERMISSIONTITLES:function(e,t){e.rootPermissionTitles=t},TOGGLE_ACTION:function(e,t){var n=t.permission,o=t.actionKey;n.action[o]=0===n.action[o]?1:0},SET_PARENTS:function(e,t){e.parents=t}},actions:{modalAdd:function(e,t){var n=e.commit;n("SET_MODAL",t)},modalClose:function(e){var t=e.commit,n=e.state,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.modals.length-1;t("DELETE_MODAL",o)},setRootPermissionTitles:function(e,t){var n=e.commit;n("SET_ROOT_PERMISSIONTITLES",t)},toggleAction:function(e,t){var n=e.commit;n("TOGGLE_ACTION",t)},findParents:function(e,t){var n=e.commit,o=e.state,i=t.key,c=[];function s(e,t,n){for(var o in e)o===t?c.push(n):"object"===Object(x["a"])(e[o])&&s(e[o],t,n.concat(o))}return s(o.rootPermissionTitles,i,[]),n("SET_PARENTS",c),c}}}));Object(o["c"])(k).use($e).use(He).mount("#app")},"688c":function(e,t,n){"use strict";n("ea83")},"72b7":function(e,t,n){"use strict";n("1f85")},"74b1":function(e,t,n){"use strict";n("461e")},8055:function(e,t,n){e.exports=n.p+"img/right.44cf9a6b.svg"},"80c1":function(e,t,n){e.exports=n.p+"img/unchecked.4ac8db5a.svg"},8568:function(e,t,n){e.exports=n.p+"img/left.b6c1c146.svg"},"984b":function(e,t,n){"use strict";n("db70")},b6c0:function(e,t,n){},b96e:function(e,t,n){"use strict";n("4ec3")},bb61:function(e,t,n){"use strict";n("13fe")},bbc0:function(e,t,n){},c044:function(e,t,n){"use strict";n("027a")},db70:function(e,t,n){},dc61:function(e,t,n){},e576:function(e,t,n){"use strict";n("2b0a")},ea83:function(e,t,n){},f73b:function(e,t,n){"use strict";n("26f1")}});
//# sourceMappingURL=app.a430dc27.js.map